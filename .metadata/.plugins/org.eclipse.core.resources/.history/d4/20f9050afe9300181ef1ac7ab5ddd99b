package com.hp.dao.impl;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

import com.hp.dao.AdminDao;
import com.hp.po.Admin;
import com.hp.util.DBUtil;

/**
 * @Description:admin的操作类
 * @author chaoling
 * @date 2018年7月30日
 */
public class AdminDaoImpl implements AdminDao {

	@Override
	public int login(Admin admin) {
		return select(admin);
	}
	
	@Override
	public int select(Admin admin) {

		Connection connection = null;
		String sql = "select * from where adminName = ?";
		PreparedStatement pstmt = null;
		ResultSet rs = null;
		int res = 0;

		try {
			connection = DBUtil.getConnection();
			pstmt = connection.prepareStatement(sql);
			rs = pstmt.executeQuery();
			// 如果查到这个name的记录，说明该用户名存在
			if (rs.next()) {
				// 获取该用户名的对应密码
				String adminPassword = rs.getString(3);
				// 比较，判断密码是否相同，相同返回1，不同返回0
				if (adminPassword.equals(admin.getAdminPassword()))
					res = 1;
				else
					res = 0;
			} else
				res = -1;

		} catch (SQLException e) {
			e.printStackTrace();
		}
		return res;
	}
}
